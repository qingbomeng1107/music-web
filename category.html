<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>分类列表</title>
<style>
body { font-family: sans-serif; background:#f7f7f7; margin:0; padding:20px; }
.container { max-width:800px; margin:auto; background:#fff; padding:20px; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.05); }
.header { display:flex; align-items:center; border-bottom:1px solid #eee; padding-bottom:15px; margin-bottom:15px; }
.back { text-decoration:none; color:#666; font-size:24px; margin-right:15px; }
h1 { margin:0; font-size:20px; }
.song { display:flex; justify-content:space-between; padding:15px 0; border-bottom:1px solid #f5f5f5; text-decoration:none; color:#333; }
.song:hover { background-color:#fafafa; }
.icon { color:#07c160; }
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <a class="back" href="index.html">←</a>
    <h1 id="catTitle">加载中...</h1>
  </div>
  <div id="songs"></div>
</div>
<script>
const params = new URLSearchParams(location.search);
const categoryName = params.get("name");
document.getElementById("catTitle").innerText = categoryName;

fetch("data.json?v=" + Date.now())
  .then(res => res.json())
  .then(data => {
    let songs = [];
    if (data.categories) {
        const catObj = data.categories.find(c => c.name === categoryName);
        songs = catObj ? catObj.songs : [];
    } else {
        songs = data[categoryName] || [];
    }

    const box = document.getElementById("songs");
    if (!songs || songs.length === 0) {
        box.innerHTML = "<p style='text-align:center;color:#999;padding:20px;'>暂无歌曲</p>";
        return;
    }

    songs.forEach(song => {
      let fileUrl = song.audio || song.file;
      box.innerHTML += `
        <a class="song" href="song.html?cat=${encodeURIComponent(categoryName)}&title=${encodeURIComponent(song.title)}&url=${encodeURIComponent(fileUrl)}">
          <span>${song.title}</span>
          <span class="icon">▶</span>
        </a>
      `;
    });
  });
</script>
</body>
</html>
